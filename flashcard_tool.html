<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ“š æš—è¨˜ã‚«ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼</title>
    <style>
        /* å…±é€šã‚¹ã‚¿ã‚¤ãƒ« */
        body { margin: 0; background-color: #f4f7f6; font-family: Arial, sans-serif; color: #333; }
        .wrapper { max-width: 1200px; margin: 20px auto; display: flex; gap: 20px; }
        
        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
        .main-content {
            flex-grow: 1;
            background-color: #fff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 { text-align: center; color: #28a745; border-bottom: 3px solid #c3e6cb; padding-bottom: 10px; }

        /* å…¥åŠ›ã‚¨ãƒªã‚¢ */
        .input-area {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid #ddd;
        }
        .input-group { margin-bottom: 10px; }
        .input-group label { display: block; font-weight: bold; margin-bottom: 5px; }
        .input-group input {
            width: 100%; padding: 10px; font-size: 16px;
            border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box;
        }
        .add-btn {
            width: 100%; padding: 12px; background-color: #28a745; color: white;
            border: none; border-radius: 4px; font-size: 16px; cursor: pointer;
            transition: background-color 0.2s;
        }
        .add-btn:hover { background-color: #218838; }

        /* ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆã‚¨ãƒªã‚¢ */
        .card-list-header {
            display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;
        }
        .study-btn {
            padding: 10px 20px; background-color: #007bff; color: white;
            border: none; border-radius: 4px; font-size: 16px; cursor: pointer; text-decoration: none;
        }
        .study-btn:hover { background-color: #0056b3; }
        
        ul#card-list { list-style: none; padding: 0; }
        li.card-item {
            background-color: #fff; border: 1px solid #ddd; padding: 15px;
            margin-bottom: 10px; border-radius: 4px; display: flex; justify-content: space-between; align-items: center;
        }
        .card-text { font-size: 1.1em; }
        .card-text small { color: #666; display: block; font-size: 0.9em; margin-top: 5px; }
        .delete-btn {
            background-color: #dc3545; color: white; border: none; padding: 5px 10px;
            border-radius: 4px; cursor: pointer; margin-left: 10px;
        }

        /* å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«ï¼‰ */
        .modal {
            display: none; position: fixed; z-index: 1000; left: 0; top: 0;
            width: 100%; height: 100%; background-color: rgba(0,0,0,0.8);
        }
        .modal-content {
            background-color: #fefefe; margin: 5% auto; padding: 0;
            border-radius: 10px; width: 90%; max-width: 600px;
            text-align: center; position: relative; overflow: hidden;
            min-height: 400px; display: flex; flex-direction: column;
        }
        .modal-header { padding: 15px; background-color: #f1f1f1; border-bottom: 1px solid #ddd; display: flex; justify-content: space-between; align-items: center;}
        .close-btn { font-size: 28px; font-weight: bold; color: #aaa; cursor: pointer; }
        
        .flashcard-container {
            flex-grow: 1; display: flex; justify-content: center; align-items: center;
            padding: 20px; perspective: 1000px; cursor: pointer;
        }
        .flashcard {
            width: 100%; height: 300px; background-color: #fff; border: 2px solid #007bff;
            border-radius: 10px; display: flex; justify-content: center; align-items: center;
            font-size: 2em; padding: 20px; box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        .flashcard.flipped { background-color: #e6f2ff; color: #0056b3; transform: rotateX(0deg); }
        .flashcard-hint { font-size: 0.5em; color: #888; margin-top: 10px; display: block;}

        .modal-footer { padding: 20px; background-color: #f1f1f1; display: flex; justify-content: space-between; }
        .nav-btn { padding: 10px 20px; font-size: 16px; cursor: pointer; border: 1px solid #ccc; background-color: white; border-radius: 4px; }
        .nav-btn:hover { background-color: #ddd; }

        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ */
        .sidebar { width: 300px; padding: 20px; background-color: #e9ecef; border-radius: 8px; }
        .sidebar h3 { color: #007bff; border-bottom: 2px solid #b8daff; margin-top: 0; }
        .sidebar ul { list-style: none; padding: 0; }
        .sidebar li { margin-bottom: 10px; }
        .sidebar a { text-decoration: none; color: #333; padding: 5px; display: block; border-radius: 4px; transition: background-color 0.2s; }
        .sidebar a:hover { background-color: #d6eaff; color: #0056b3; }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="main-content">
            <h1>ğŸ“š æš—è¨˜ã‚«ãƒ¼ãƒ‰ãƒ¡ãƒ¼ã‚«ãƒ¼</h1>

            <!-- å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
            <div class="input-area">
                <div class="input-group">
                    <label>è¡¨é¢ (å•é¡Œ):</label>
                    <input type="text" id="card-front" placeholder="ä¾‹: Apple">
                </div>
                <div class="input-group">
                    <label>è£é¢ (ç­”ãˆ):</label>
                    <input type="text" id="card-back" placeholder="ä¾‹: ã‚Šã‚“ã”">
                </div>
                <button class="add-btn" onclick="addCard()">ã‚«ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹</button>
            </div>

            <!-- ãƒªã‚¹ãƒˆè¡¨ç¤º -->
            <div class="card-list-header">
                <h2>ä½œæˆã—ãŸã‚«ãƒ¼ãƒ‰ (<span id="card-count">0</span>æš)</h2>
                <button class="study-btn" onclick="startStudy()">ğŸ“– å­¦ç¿’ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            </div>
            <ul id="card-list">
                <!-- ã“ã“ã«ã‚«ãƒ¼ãƒ‰ãŒè¿½åŠ ã•ã‚Œã¾ã™ -->
            </ul>
        </div>

        <!-- ã‚µã‚¤ãƒ‰ãƒãƒ¼ -->
        <div class="sidebar">
            <h3>ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«é›†</h3>
            <ul>
                <li><a href="index.html">ğŸ“ æ–‡å­—æ•°ãƒ»è¡Œæ•°ã‚«ã‚¦ãƒ³ãƒˆ</a></li> 
                <li><a href="zipcode_search.html">ğŸ“® éƒµä¾¿ç•ªå·ãƒ»ä½æ‰€æ¤œç´¢</a></li>
                <li><a href="wareki_converter.html">ğŸ—“ï¸ è¥¿æš¦ãƒ»å’Œæš¦ ç›¸äº’å¤‰æ›</a></li>
                <li><a href="warikan_tool.html">ğŸ§® å‰²ã‚Šå‹˜è¨ˆç®—ãƒ„ãƒ¼ãƒ«</a></li>
                <li><a href="timer_tool.html">â±ï¸ ã‚·ãƒ³ãƒ—ãƒ«ã‚¿ã‚¤ãƒãƒ¼</a></li>
                <li><a href="law_navigator.html">âš–ï¸ æ³•å¾‹ã®å…¨ä½“åƒãƒŠãƒ“</a></li>
            </ul>
            <h3 style="margin-top: 30px;">ä½¿ã„æ–¹</h3>
            <p style="font-size: 0.9em; color: #555;">
                1. å•é¡Œã¨ç­”ãˆã‚’å…¥åŠ›ã—ã¦è¿½åŠ ã—ã¾ã™ã€‚<br>
                2. ãƒ‡ãƒ¼ã‚¿ã¯è‡ªå‹•çš„ã«ä¿å­˜ã•ã‚Œã¾ã™ã€‚<br>
                3. ã€Œå­¦ç¿’ã‚¹ã‚¿ãƒ¼ãƒˆã€ã§ãƒ†ã‚¹ãƒˆãŒã§ãã¾ã™ã€‚ã‚«ãƒ¼ãƒ‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ç­”ãˆãŒå‡ºã¾ã™ã€‚
            </p>
        </div>
    </div>

    <!-- å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="study-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <span>å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰</span>
                <span class="close-btn" onclick="closeStudy()">&times;</span>
            </div>
            <div class="flashcard-container" onclick="flipCard()">
                <div id="flashcard" class="flashcard">
                    <div>
                        <span id="flashcard-text">å•é¡Œãƒ†ã‚­ã‚¹ãƒˆ</span>
                        <small class="flashcard-hint" id="flashcard-hint">ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç­”ãˆã‚’è¦‹ã‚‹</small>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="nav-btn" onclick="prevCard()">â† å‰ã¸</button>
                <span id="study-progress">1 / 10</span>
                <button class="nav-btn" onclick="nextCard()">æ¬¡ã¸ â†’</button>
            </div>
        </div>
    </div>

    <script>
        // ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’ç®¡ç†ã™ã‚‹é…åˆ—
        let cards = [];
        let currentCardIndex = 0;
        let isFlipped = false;

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ãƒ‰
        document.addEventListener('DOMContentLoaded', () => {
            loadCards();
            renderList();
        });

        // LocalStorageã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€
        function loadCards() {
            const storedCards = localStorage.getItem('myFlashcards');
            if (storedCards) {
                cards = JSON.parse(storedCards);
            }
        }

        // LocalStorageã«ãƒ‡ãƒ¼ã‚¿ã‚’ä¿å­˜ã™ã‚‹
        function saveCards() {
            localStorage.setItem('myFlashcards', JSON.stringify(cards));
        }

        // ã‚«ãƒ¼ãƒ‰ã‚’è¿½åŠ ã™ã‚‹
        function addCard() {
            const frontInput = document.getElementById('card-front');
            const backInput = document.getElementById('card-back');
            const frontText = frontInput.value.trim();
            const backText = backInput.value.trim();

            if (!frontText || !backText) {
                alert('è¡¨é¢ã¨è£é¢ã®ä¸¡æ–¹ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }

            cards.push({ front: frontText, back: backText });
            saveCards();
            renderList();

            // å…¥åŠ›æ¬„ã‚’ã‚¯ãƒªã‚¢
            frontInput.value = '';
            backInput.value = '';
            frontInput.focus();
        }

        // ã‚«ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã™ã‚‹
        function deleteCard(index) {
            if (confirm('ã“ã®ã‚«ãƒ¼ãƒ‰ã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                cards.splice(index, 1);
                saveCards();
                renderList();
            }
        }

        // ãƒªã‚¹ãƒˆã‚’æç”»ã™ã‚‹
        function renderList() {
            const listElement = document.getElementById('card-list');
            const countElement = document.getElementById('card-count');
            listElement.innerHTML = '';
            countElement.textContent = cards.length;

            if (cards.length === 0) {
                listElement.innerHTML = '<li style="text-align:center; color:#888;">ã‚«ãƒ¼ãƒ‰ãŒã¾ã ã‚ã‚Šã¾ã›ã‚“ã€‚ã€Œè¿½åŠ ã€ã—ã¦ä½œæˆã—ã¾ã—ã‚‡ã†ï¼</li>';
                return;
            }

            cards.forEach((card, index) => {
                const li = document.createElement('li');
                li.className = 'card-item';
                li.innerHTML = `
                    <div class="card-text">
                        <strong>Q: ${escapeHtml(card.front)}</strong>
                        <small>A: ${escapeHtml(card.back)}</small>
                    </div>
                    <button class="delete-btn" onclick="deleteCard(${index})">å‰Šé™¤</button>
                `;
                listElement.appendChild(li);
            });
        }

        // HTMLã‚¨ã‚¹ã‚±ãƒ¼ãƒ—å‡¦ç†ï¼ˆå®‰å…¨ã®ãŸã‚ï¼‰
        function escapeHtml(str) {
            if(!str) return "";
            return str.replace(/[&<>"']/g, function(m) {
                return {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#039;'
                }[m];
            });
        }

        // --- å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ã®å‡¦ç† ---

        function startStudy() {
            if (cards.length === 0) {
                alert('ã‚«ãƒ¼ãƒ‰ãŒã‚ã‚Šã¾ã›ã‚“ã€‚ã¾ãšã¯ã‚«ãƒ¼ãƒ‰ã‚’ä½œæˆã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            currentCardIndex = 0;
            isFlipped = false;
            showModal();
            updateCardDisplay();
        }

        function showModal() {
            document.getElementById('study-modal').style.display = 'block';
        }

        function closeStudy() {
            document.getElementById('study-modal').style.display = 'none';
        }

        function updateCardDisplay() {
            const card = cards[currentCardIndex];
            const cardElement = document.getElementById('flashcard');
            const textElement = document.getElementById('flashcard-text');
            const hintElement = document.getElementById('flashcard-hint');
            const progressElement = document.getElementById('study-progress');

            // çŠ¶æ…‹ã‚’ãƒªã‚»ãƒƒãƒˆï¼ˆè¡¨é¢ã‚’è¡¨ç¤ºï¼‰
            isFlipped = false;
            cardElement.classList.remove('flipped');
            cardElement.style.backgroundColor = '#fff';
            cardElement.style.color = '#333';
            
            textElement.textContent = card.front;
            hintElement.textContent = "ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç­”ãˆã‚’è¦‹ã‚‹";
            
            progressElement.textContent = `${currentCardIndex + 1} / ${cards.length}`;
        }

        function flipCard() {
            const card = cards[currentCardIndex];
            const cardElement = document.getElementById('flashcard');
            const textElement = document.getElementById('flashcard-text');
            const hintElement = document.getElementById('flashcard-hint');

            isFlipped = !isFlipped;

            if (isFlipped) {
                // è£é¢ï¼ˆç­”ãˆï¼‰ã‚’è¡¨ç¤º
                textElement.textContent = card.back;
                hintElement.textContent = "ã‚¯ãƒªãƒƒã‚¯ã—ã¦å•é¡Œã«æˆ»ã‚‹";
                cardElement.classList.add('flipped');
            } else {
                // è¡¨é¢ï¼ˆå•é¡Œï¼‰ã‚’è¡¨ç¤º
                textElement.textContent = card.front;
                hintElement.textContent = "ã‚¯ãƒªãƒƒã‚¯ã—ã¦ç­”ãˆã‚’è¦‹ã‚‹";
                cardElement.classList.remove('flipped');
            }
        }

        function nextCard() {
            if (currentCardIndex < cards.length - 1) {
                currentCardIndex++;
                updateCardDisplay();
            } else {
                if(confirm("æœ€å¾Œã®ã‚«ãƒ¼ãƒ‰ã§ã™ã€‚æœ€åˆã«æˆ»ã‚Šã¾ã™ã‹ï¼Ÿ")) {
                    currentCardIndex = 0;
                    updateCardDisplay();
                }
            }
        }

        function prevCard() {
            if (currentCardIndex > 0) {
                currentCardIndex--;
                updateCardDisplay();
            }
        }
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
        window.onclick = function(event) {
            const modal = document.getElementById('study-modal');
            if (event.target == modal) {
                closeStudy();
            }
        }
    </script>
</body>
</html>
