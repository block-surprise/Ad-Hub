<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>é«˜æ©Ÿèƒ½ æ–‡å­—æ•°ãƒ»è¡Œæ•°ã‚«ã‚¦ãƒ³ãƒˆãƒ„ãƒ¼ãƒ«</title>
    <style>
        /* åŸºæœ¬çš„ãªã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚° */
        .container { 
            max-width: 800px; 
            margin: 20px auto; 
            padding: 30px; 
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            font-family: Arial, sans-serif;
        }
        h1 { text-align: center; color: #333; }
        textarea { 
            width: 100%; 
            height: 250px; 
            font-size: 16px; 
            padding: 15px;
            box-sizing: border-box;
            border: 2px solid #ccc;
            border-radius: 4px;
            margin-bottom: 20px;
            resize: vertical; /* ç¸¦æ–¹å‘ã®ã¿ãƒªã‚µã‚¤ã‚ºå¯èƒ½ */
        }
        .results h2, .results h3 { 
            border-bottom: 2px solid #eee; 
            padding-bottom: 5px; 
            margin-top: 20px;
        }
        .results p {
            font-size: 1.1em;
            margin: 10px 0;
            display: flex;
            justify-content: space-between;
        }
        .results strong {
            font-size: 1.2em;
            font-weight: bold;
            color: #007bff; /* ãƒ¡ã‚¤ãƒ³ã‚«ãƒ©ãƒ¼ */
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>æ–‡å­—æ•°ãƒ»è¡Œæ•°ã‚«ã‚¦ãƒ³ãƒˆãƒ„ãƒ¼ãƒ«</h1>

        <textarea id="input-text" oninput="countText()" placeholder="ã“ã“ã«ãƒ†ã‚­ã‚¹ãƒˆã‚’å…¥åŠ›ã—ã¦ãã ã•ã„..."></textarea>

        <div class="results">
            <h2>ğŸ“Š åŸºæœ¬ã‚«ã‚¦ãƒ³ãƒˆ</h2>
            <p><span>å…¨æ–‡å­—æ•° (ç©ºç™½ãƒ»æ”¹è¡Œå«ã‚€):</span> <strong id="total-count">0</strong> <span>æ–‡å­—</span></p>
            <p><span>ç©ºç™½ãƒ»æ”¹è¡Œã‚’é™¤ãæ–‡å­—æ•°:</span> <strong id="pure-count">0</strong> <span>æ–‡å­—</span></p>
            <p><span>è¡Œæ•°:</span> <strong id="line-count">1</strong> <span>è¡Œ</span></p>
            
            <hr>

            <h2>â±ï¸ æ™‚é–“ã¨åŠ¹ç‡</h2>
            <p><span>æ¨å®šèª­äº†æ™‚é–“ (500å­—/åˆ†æ›ç®—):</span> <strong id="reading-time">0åˆ† 0ç§’</strong></p>

            <hr>

            <h2>ğŸŒ ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¥ãƒã‚§ãƒƒã‚¯</h2>
            <p><span>X (æ—§Twitter) (280å­—):</span> <strong id="limit-x">0 æ–‡å­—</strong></p>
            <p><span>Google Title (32å­—ç›®å®‰):</span> <strong id="limit-google-title">0 æ–‡å­—</strong></p>
        </div>
    </div>

    <script>
        function countText() {
            // 1. ãƒ†ã‚­ã‚¹ãƒˆã‚¨ãƒªã‚¢ã®ç¾åœ¨å€¤ã‚’å–å¾—
            const text = document.getElementById('input-text').value;

            // 2. å…¨æ–‡å­—æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
            const totalCount = text.length;
            document.getElementById('total-count').textContent = totalCount;

            // 3. ç©ºç™½ãƒ»æ”¹è¡Œã‚’é™¤ãæ–‡å­—æ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
            const pureText = text.replace(/[\s\n]/g, '');
            const pureCount = pureText.length;
            document.getElementById('pure-count').textContent = pureCount;

            // 4. è¡Œæ•°ã‚’ã‚«ã‚¦ãƒ³ãƒˆ
            const lineCount = text.split('\n').length;
            document.getElementById('line-count').textContent = lineCount;
            
            // --- æ‹¡å¼µæ©Ÿèƒ½ ---

            // 5. èª­äº†æ™‚é–“ã®æ¨å®š
            const readingSpeed = 500; // 1åˆ†é–“ã«500æ–‡å­—ã¨ä»®å®š
            const readingTimeMinutes = totalCount / readingSpeed;

            const minutes = Math.floor(readingTimeMinutes);
            const seconds = Math.round((readingTimeMinutes - minutes) * 60);

            document.getElementById('reading-time').textContent = `${minutes}åˆ† ${seconds}ç§’`;

            // 6. å„ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã®æ–‡å­—æ•°åˆ¶é™ãƒã‚§ãƒƒã‚¯
            const limits = [
                { id: 'limit-x', name: 'X (æ—§Twitter)', limit: 280, count: totalCount },
                { id: 'limit-google-title', name: 'Google Title (ç›®å®‰)', limit: 32, count: pureCount }, 
            ];

            limits.forEach(item => {
                const element = document.getElementById(item.id);
                const remaining = item.limit - item.count;
                
                let color = '#28a745'; // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯ç·‘
                let statusText = `${item.count} æ–‡å­—`;

                if (item.count > item.limit) {
                    // åˆ¶é™ã‚’è¶…ãˆã¦ã„ã‚‹å ´åˆ
                    color = 'red';
                    statusText = `${item.count} æ–‡å­— (è¶…é: ${Math.abs(remaining)} æ–‡å­—)`;
                } else {
                    // åˆ¶é™å†…ã®å ´åˆ
                    statusText = `${item.count} æ–‡å­— (æ®‹ã‚Š ${remaining} æ–‡å­—)`;
                }

                element.innerHTML = `<span style="color: ${color};">${statusText}</span>`;
            });
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«ä¸€åº¦å®Ÿè¡Œã—ã€åˆæœŸå€¤ã‚’è¨­å®š
        document.addEventListener('DOMContentLoaded', countText);
    </script>
</body>
</html>
