<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éƒµä¾¿ç•ªå·ãƒ»ä½æ‰€æ¤œç´¢ãƒ„ãƒ¼ãƒ«</title>
    
    <meta name="google-adsense-account" content="ca-pub-3571574988222927">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3571574988222927" crossorigin="anonymous"></script>

    <style>
        body { 
            margin: 0; 
            background-color: #f4f7f6;
            font-family: Arial, sans-serif; 
        }
        .wrapper {
            max-width: 1200px;
            margin: 0 auto; /* ã‚¹ãƒãƒ›æ™‚ã¯ä¸Šä¸‹ä½™ç™½ãªã— */
            display: flex;
            flex-direction: column; /* ã€é‡è¦ã€‘ã‚¹ãƒãƒ›ã§ã¯ç¸¦ä¸¦ã³ï¼ˆã‚µã‚¤ãƒ‰ãƒãƒ¼ãŒä¸‹ã¸ï¼‰ */
            gap: 20px;
            padding: 10px; /* ã‚¹ãƒãƒ›ç”»é¢ç«¯ã®ä½™ç™½ */
        }
        
        /* PCï¼ˆç”»é¢å¹…768pxä»¥ä¸Šï¼‰ã®è¨­å®š */
        @media (min-width: 768px) {
            .wrapper {
                flex-direction: row; /* æ¨ªä¸¦ã³ã«æˆ»ã™ */
                margin: 20px auto;
                padding: 0 20px;
            }
        }
        
        .main-content {
            flex-grow: 1;
            background-color: #fff;
            padding: 20px; /* ã‚¹ãƒãƒ›å‘ã‘ã«å°‘ã—ç‹­ã */
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        @media (min-width: 768px) {
            .main-content {
                padding: 30px; /* PCã§ã¯å…ƒã®åºƒã• */
            }
        }

        h1 { text-align: center; color: #333; font-size: 1.5em; }

        .search-area {
            text-align: center;
            padding: 20px 0;
            border-bottom: 2px solid #eee;
            margin-bottom: 20px;
        }

        /* å…¥åŠ›æ¬„ã‚’ã‚¹ãƒãƒ›ã§ä½¿ã„ã‚„ã™ãèª¿æ•´ */
        input[type="text"] { 
            padding: 12px; 
            font-size: 16px; /* ã‚¹ãƒãƒ›ã®ã‚ºãƒ¼ãƒ é˜²æ­¢ã®ãŸã‚16pxæ¨å¥¨ */
            width: 100%; /* ã‚¹ãƒãƒ›ã§ã¯å¹…ã„ã£ã±ã„ */
            max-width: 250px; /* PCã§ã®æœ€å¤§å¹… */
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 10px; /* ã‚¹ãƒãƒ›ã§ç¸¦ã«ä¸¦ã‚“ã æ™‚ã®éš™é–“ */
        }

        @media (min-width: 768px) {
            input[type="text"] {
                width: 250px;
                margin-bottom: 0;
                margin-right: 10px;
            }
        }

        button { 
            padding: 12px 20px; 
            font-size: 16px; 
            cursor: pointer; 
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            transition: background-color 0.2s;
            width: 100%; /* ã‚¹ãƒãƒ›ã§ã¯ãƒœã‚¿ãƒ³ã‚‚å¹…ã„ã£ã±ã„ */
            max-width: 150px;
        }

        @media (min-width: 768px) {
            button {
                width: auto;
            }
        }

        button:hover {
            background-color: #0056b3;
        }

        .results {
            padding: 20px;
            border: 1px dashed #007bff;
            border-radius: 4px;
            background-color: #f8faff;
            word-wrap: break-word; /* é•·ã„ä½æ‰€ã®æº¢ã‚Œé˜²æ­¢ */
        }
        .results h2 {
            color: #333;
            margin-top: 0;
            font-size: 1.2em;
        }
        #address-result {
            font-size: 1.2em; /* ã‚¹ãƒãƒ›å‘ã‘ã«å°‘ã—èª¿æ•´ */
            font-weight: bold;
            color: #d9534f;
            min-height: 1.5em; 
        }

        @media (min-width: 768px) {
            #address-result { font-size: 1.5em; }
        }

        #error-message {
            color: red;
            font-weight: bold;
        }
        
        .sidebar {
            width: 100%; /* ã‚¹ãƒãƒ›ã§ã¯å…¨å¹… */
            box-sizing: border-box;
            padding: 20px;
            background-color: #e9ecef;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        @media (min-width: 768px) {
            .sidebar {
                width: 300px; /* PCã§ã¯å›ºå®šå¹… */
            }
        }

        .sidebar h3 {
            color: #007bff;
            border-bottom: 2px solid #b8daff;
            padding-bottom: 5px;
            margin-top: 0;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
        }
        .sidebar li {
            margin-bottom: 10px;
        }
        .sidebar a {
            text-decoration: none;
            color: #333;
            padding: 10px; /* ã‚¹ãƒãƒ›ã§æŠ¼ã—ã‚„ã™ãå°‘ã—åºƒã */
            display: block;
            border-radius: 4px;
            background-color: #fff; /* ã‚µã‚¤ãƒ‰ãƒãƒ¼å†…ãƒªãƒ³ã‚¯ã‚’è¦‹ã‚„ã™ã */
            transition: background-color 0.2s;
        }
        .sidebar a:hover {
            background-color: #d6eaff;
            color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        
        <div class="main-content">
            <h1>ğŸ“® éƒµä¾¿ç•ªå·ãƒ»ä½æ‰€æ¤œç´¢ãƒ„ãƒ¼ãƒ«</h1>

            <div class="search-area">
                <label for="zipcode">éƒµä¾¿ç•ªå· (ãƒã‚¤ãƒ•ãƒ³ãªã— 7æ¡):</label><br>
                <input type="text" id="zipcode" maxlength="7" placeholder="ä¾‹: 1000001">
                
                <button onclick="searchAddress()">æ¤œç´¢</button>
            </div>

            <div class="results">
                <h2>æ¤œç´¢çµæœ</h2>
                <div id="address-result">...ã“ã“ã«ä½æ‰€ãŒè¡¨ç¤ºã•ã‚Œã¾ã™...</div>
                <p id="error-message"></p>
            </div>
        </div>
        
        <div class="sidebar">
            <h3>ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«é›†</h3>
            <ul id="dynamic-tool-list">
                <li>ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ­ãƒ¼ãƒ‰ä¸­...</li>
            </ul>

            <h3 style="margin-top: 30px;">ãƒ‡ãƒ¼ã‚¿ã®æƒ…å ±</h3>
            <p style="font-size: 0.9em; color: #555;">
                æœ¬ãƒ„ãƒ¼ãƒ«ã¯ã€<a href="https://zipcloud.ibsnet.co.jp/" target="_blank">ZipCloud API</a>ã‚’åˆ©ç”¨ã—ã¦ä½æ‰€æƒ…å ±ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚
            </p>
        </div>
        
    </div>

    <script>
        // ã‚¹ã‚¯ãƒªãƒ—ãƒˆéƒ¨åˆ†ã¯ä¸€åˆ‡å¤‰æ›´ã—ã¦ã„ã¾ã›ã‚“
        async function searchAddress() {
            const zipcode = document.getElementById('zipcode').value;
            const resultElement = document.getElementById('address-result');
            const errorElement = document.getElementById('error-message');

            resultElement.textContent = 'æ¤œç´¢ä¸­...';
            errorElement.textContent = '';
            resultElement.style.color = '#007bff'; 

            if (!/^\d{7}$/.test(zipcode)) {
                errorElement.textContent = 'éƒµä¾¿ç•ªå·ã¯ãƒã‚¤ãƒ•ãƒ³ãªã—ã®7æ¡ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
                resultElement.textContent = 'æ¤œç´¢ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚';
                resultElement.style.color = '#d9534f'; 
                return;
            }

            const API_URL = `https://zipcloud.ibsnet.co.jp/api/search?zipcode=${zipcode}`;

            try {
                const response = await fetch(API_URL);
                const data = await response.json();

                if (data.status === 200) {
                    if (data.results) {
                        const address = data.results[0];
                        const fullAddress = `${address.pref}${address.address1}${address.address2}`;
                        resultElement.textContent = fullAddress;
                        resultElement.style.color = '#333'; 
                    } else {
                        errorElement.textContent = `éƒµä¾¿ç•ªå·ã€Œ${zipcode}ã€ã«å¯¾å¿œã™ã‚‹ä½æ‰€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚`;
                        resultElement.textContent = 'è©²å½“ã™ã‚‹ä½æ‰€ãŒã‚ã‚Šã¾ã›ã‚“ã€‚';
                        resultElement.style.color = '#d9534f';
                    }
                } else {
                    errorElement.textContent = `APIã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: ${data.status}`;
                    resultElement.textContent = 'æ¤œç´¢ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚';
                    resultElement.style.color = '#d9534f';
                }

            } catch (e) {
                errorElement.textContent = 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã€ã¾ãŸã¯APIã¨ã®é€šä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚';
                resultElement.textContent = 'æ¤œç´¢ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚';
                resultElement.style.color = '#d9534f';
                console.error('é€šä¿¡ã‚¨ãƒ©ãƒ¼:', e);
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            const zipcodeInput = document.getElementById('zipcode');
            const resultElement = document.getElementById('address-result');
            resultElement.textContent = 'éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ã€Œæ¤œç´¢ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚';
            resultElement.style.color = '#333';

            zipcodeInput.addEventListener('keydown', (event) => {
                if (event.key === 'Enter') {
                    event.preventDefault(); 
                    searchAddress();
                }
            });
        });

        const JSON_URL = 'tools.json';
        const TOP_TOOLS_COUNT = 4; 

        async function loadAndRenderTools(renderFunction, listId) {
            try {
                const response = await fetch(JSON_URL);
                if (!response.ok) {
                    throw new Error('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã€ã¾ãŸã¯JSONãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚');
                }
                const toolsData = await response.json();
                renderFunction(toolsData, listId);
            } catch (error) {
                console.error('ãƒ„ãƒ¼ãƒ«ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ:', error);
                const container = document.getElementById(listId);
                if (container) {
                    container.innerHTML = `<li style="color:red; font-size:0.9em;">ã‚¨ãƒ©ãƒ¼: ãƒ‡ãƒ¼ã‚¿ (${JSON_URL}) ã‚’èª­ã¿è¾¼ã‚ã¾ã›ã‚“ã€‚</li>`;
                }
            }
        }

        function generateSidebarNav(toolsData, listId = 'dynamic-tool-list') {
            const listContainer = document.getElementById(listId);
            if (!listContainer) return;

            let listHtml = '';
            const totalCount = toolsData.length;
            const currentPath = window.location.pathname.split('/').pop() || 'index.html'; 

            toolsData.slice(0, TOP_TOOLS_COUNT).forEach(tool => {
                const isActive = tool.href === currentPath || (currentPath === '' && tool.href === 'index.html');
                const activeStyle = isActive ? 'style="background-color: #d6eaff; color: #0056b3;"' : '';
                const title = isActive ? `${tool.icon} ${tool.title} (ç¾åœ¨åœ°)` : `${tool.icon} ${tool.title}`;
                listHtml += `<li><a href="${tool.href}" ${activeStyle}>${title}</a></li>`;
            });

            const otherCount = totalCount - TOP_TOOLS_COUNT;
            if (otherCount > 0) {
                listHtml += `<hr style="margin: 10px 0;">`;
                listHtml += `<li><a href="tools_index.html" style="font-weight: bold; color: #dc3545;">âœ¨ ãã®ä»– (${otherCount}ä»¶) ã‚’è¦‹ã‚‹</a></li>`;
            }

            listContainer.innerHTML = listHtml;
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadAndRenderTools(generateSidebarNav, 'dynamic-tool-list'); 
        });
    </script>
</body>
</html>
