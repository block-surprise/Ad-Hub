<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éƒµä¾¿ç•ªå·ãƒ»ä½æ‰€æ¤œç´¢ãƒ„ãƒ¼ãƒ«</title>

    <meta name="google-adsense-account" content="ca-pub-3571574988222927">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3571574988222927" crossorigin="anonymous"></script>

    <style>
        body { 
            margin: 0; 
            background-color: #f4f7f6;
            font-family: Arial, sans-serif; 
            line-height: 1.6;
        }
        .wrapper {
            max-width: 1200px;
            margin: 0 auto;
            padding: 10px;
            display: flex;
            flex-direction: column; /* ã‚¹ãƒãƒ›ã§ã¯ç¸¦ä¸¦ã³ */
            gap: 20px;
        }

        /* ãƒ‘ã‚½ã‚³ãƒ³ï¼ˆç”»é¢å¹…768pxä»¥ä¸Šï¼‰ã®è¨­å®š */
        @media (min-width: 768px) {
            .wrapper {
                flex-direction: row; /* æ¨ªä¸¦ã³ã«æˆ»ã™ */
                margin: 20px auto;
                padding: 20px;
            }
        }
        
        .main-content {
            flex-grow: 1;
            background-color: #fff;
            padding: 20px; 
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        h1 { 
            text-align: center; 
            color: #333; 
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .search-area {
            text-align: center;
            padding-bottom: 20px;
            border-bottom: 2px solid #eee;
            margin-bottom: 20px;
        }

        /* å…¥åŠ›æ¬„ã‚’ã‚¹ãƒãƒ›ã§ã‚‚è¦‹ã‚„ã™ã */
        input[type="text"] { 
            padding: 12px; 
            font-size: 16px; /* 16pxä»¥ä¸Šã«ã™ã‚‹ã¨iPhoneã§ã‚ºãƒ¼ãƒ ã•ã‚Œãªããªã‚Šã¾ã™ */
            width: 100%;
            max-width: 300px;
            box-sizing: border-box;
            border: 2px solid #ccc;
            border-radius: 4px;
            margin-bottom: 10px;
        }
        
        button { 
            padding: 12px 24px; 
            font-size: 16px; 
            cursor: pointer; 
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            width: 100%;
            max-width: 300px;
            transition: background-color 0.2s;
        }
        
        @media (min-width: 768px) {
            input[type="text"], button {
                width: auto; /* ãƒ‘ã‚½ã‚³ãƒ³ã§ã¯å…ƒã®ã‚µã‚¤ã‚ºã« */
                margin-bottom: 0;
            }
        }

        button:hover {
            background-color: #0056b3;
        }

        .results {
            padding: 15px;
            border: 1px dashed #007bff;
            border-radius: 4px;
            background-color: #f8faff;
            text-align: center;
        }
        
        #address-result {
            font-size: 1.2rem;
            font-weight: bold;
            color: #d9534f;
            word-break: break-all; /* é•·ã„ä½æ‰€ã®æ”¹è¡Œå¯¾å¿œ */
            margin-top: 10px;
        }
        
        #error-message {
            color: red;
            font-weight: bold;
            font-size: 0.9rem;
        }
        
        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®è¨­å®š */
        .sidebar {
            width: 100%;
            box-sizing: border-box;
            padding: 20px;
            background-color: #e9ecef;
            border-radius: 8px;
        }
        
        @media (min-width: 768px) {
            .sidebar {
                width: 300px; /* ãƒ‘ã‚½ã‚³ãƒ³ã§ã¯å¹…å›ºå®š */
            }
        }

        .sidebar h3 {
            color: #007bff;
            border-bottom: 2px solid #b8daff;
            padding-bottom: 5px;
            font-size: 1.1rem;
        }
        .sidebar ul { list-style: none; padding: 0; }
        .sidebar li { margin-bottom: 10px; }
        .sidebar a {
            text-decoration: none;
            color: #333;
            padding: 10px;
            display: block;
            background-color: #fff;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="main-content">
            <h1>ğŸ“® éƒµä¾¿ç•ªå·ãƒ»ä½æ‰€æ¤œç´¢</h1>

            <div class="search-area">
                <label for="zipcode">éƒµä¾¿ç•ªå· (7æ¡ãƒ»ãƒã‚¤ãƒ•ãƒ³ãªã—)</label><br>
                <input type="text" id="zipcode" maxlength="7" inputmode="numeric" placeholder="ä¾‹: 1000001"><br>
                <button onclick="searchAddress()">ä½æ‰€ã‚’æ¤œç´¢ã™ã‚‹</button>
            </div>

            <div class="results">
                <h2 style="font-size: 1rem; margin: 0;">æ¤œç´¢çµæœ</h2>
                <div id="address-result">ã“ã“ã«ä½æ‰€ãŒè¡¨ç¤ºã•ã‚Œã¾ã™</div>
                <p id="error-message"></p>
            </div>
        </div>
        
        <div class="sidebar">
            <h3>ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«é›†</h3>
            <ul id="dynamic-tool-list">
                <li>èª­ã¿è¾¼ã¿ä¸­...</li>
            </ul>

            <h3 style="margin-top: 20px;">ãƒ‡ãƒ¼ã‚¿ã®æƒ…å ±</h3>
            <p style="font-size: 0.85em; color: #555;">
                æœ¬ãƒ„ãƒ¼ãƒ«ã¯ <a href="https://zipcloud.ibsnet.co.jp/" target="_blank">ZipCloud API</a> ã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚
            </p>
        </div>
    </div>

    <script>
        // --- æ¤œç´¢ãƒ­ã‚¸ãƒƒã‚¯ (å¤‰æ›´ãªã—) ---
        async function searchAddress() {
            const zipcode = document.getElementById('zipcode').value;
            const resultElement = document.getElementById('address-result');
            const errorElement = document.getElementById('error-message');

            resultElement.textContent = 'æ¤œç´¢ä¸­...';
            errorElement.textContent = '';

            if (!/^\d{7}$/.test(zipcode)) {
                errorElement.textContent = '7æ¡ã®æ•°å­—ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
                resultElement.textContent = '-';
                return;
            }

            try {
                const response = await fetch(`https://zipcloud.ibsnet.co.jp/api/search?zipcode=${zipcode}`);
                const data = await response.json();
                if (data.status === 200 && data.results) {
                    const addr = data.results[0];
                    resultElement.textContent = `${addr.pref}${addr.address1}${addr.address2}`;
                    resultElement.style.color = '#333';
                } else {
                    errorElement.textContent = 'ä½æ‰€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚';
                    resultElement.textContent = '-';
                }
            } catch (e) {
                errorElement.textContent = 'ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚';
            }
        }

        // --- Enterã‚­ãƒ¼å¯¾å¿œ ---
        document.getElementById('zipcode').addEventListener('keydown', (e) => {
            if (e.key === 'Enter') searchAddress();
        });

        // --- ã‚µã‚¤ãƒ‰ãƒãƒ¼èª­ã¿è¾¼ã¿ãƒ­ã‚¸ãƒƒã‚¯ (å¤‰æ›´ãªã—) ---
        const JSON_URL = 'tools.json';
        async function loadSidebar() {
            try {
                const response = await fetch(JSON_URL);
                const tools = await response.json();
                const list = document.getElementById('dynamic-tool-list');
                list.innerHTML = tools.slice(0, 4).map(t => 
                    `<li><a href="${t.href}">${t.icon} ${t.title}</a></li>`
                ).join('') + `<li><a href="tools_index.html" style="color:red;">âœ¨ ãã®ä»–ã‚’è¦‹ã‚‹</a></li>`;
            } catch (e) {
                document.getElementById('dynamic-tool-list').innerHTML = '<li>èª­ã¿è¾¼ã¿å¤±æ•—</li>';
            }
        }
        window.addEventListener('DOMContentLoaded', loadSidebar);
    </script>
</body>
</html>
