<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>éƒµä¾¿ç•ªå·ãƒ»ä½æ‰€æ¤œç´¢ãƒ„ãƒ¼ãƒ«</title>
    <style>
        /* å…±é€šã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚¹ã‚¿ã‚¤ãƒ« (æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆãƒ„ãƒ¼ãƒ«ã¨æƒãˆã‚‹) */
        body { 
            margin: 0; 
            background-color: #f4f7f6;
            font-family: Arial, sans-serif; 
        }
        .wrapper {
            max-width: 1200px;
            margin: 20px auto;
            display: flex;
            gap: 20px;
        }
        
        /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ */
        .main-content {
            flex-grow: 1;
            background-color: #fff;
            padding: 30px; 
            border: 1px solid #ddd;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 { text-align: center; color: #333; }

        /* ãƒ•ã‚©ãƒ¼ãƒ ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .search-area {
            text-align: center;
            padding: 20px 0;
            border-bottom: 2px solid #eee;
            margin-bottom: 20px;
        }
        input[type="text"] { 
            padding: 10px; 
            font-size: 16px; 
            width: 250px;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-right: 10px;
        }
        button { 
            padding: 10px 20px; 
            font-size: 16px; 
            cursor: pointer; 
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        button:hover {
            background-color: #0056b3;
        }

        /* çµæœè¡¨ç¤ºã‚¨ãƒªã‚¢ */
        .results {
            padding: 20px;
            border: 1px dashed #007bff;
            border-radius: 4px;
            background-color: #f8faff;
        }
        .results h2 {
            color: #333;
            margin-top: 0;
        }
        #address-result {
            font-size: 1.5em;
            font-weight: bold;
            color: #d9534f;
            min-height: 1.5em; /* çµæœãŒãªã„æ™‚ã®é«˜ã•èª¿æ•´ */
        }
        #error-message {
            color: red;
            font-weight: bold;
        }
        
        /* ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚¨ãƒªã‚¢ (æ–‡å­—æ•°ã‚«ã‚¦ãƒ³ãƒˆãƒ„ãƒ¼ãƒ«ã¨åŒã˜ã‚¹ã‚¿ã‚¤ãƒ«) */
        .sidebar {
            width: 300px;
            padding: 20px;
            background-color: #e9ecef;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        .sidebar h3 {
            color: #007bff;
            border-bottom: 2px solid #b8daff;
            padding-bottom: 5px;
            margin-top: 0;
        }
        .sidebar ul {
            list-style: none;
            padding: 0;
        }
        .sidebar li {
            margin-bottom: 10px;
        }
        .sidebar a {
            text-decoration: none;
            color: #333;
            padding: 5px;
            display: block;
            border-radius: 4px;
            transition: background-color 0.2s;
        }
        .sidebar a:hover {
            background-color: #d6eaff;
            color: #0056b3;
        }
    </style>
</head>
<body>
    <div class="wrapper">
        
        <div class="main-content">
            <h1>ğŸ“® éƒµä¾¿ç•ªå·ãƒ»ä½æ‰€æ¤œç´¢ãƒ„ãƒ¼ãƒ«</h1>

            <div class="search-area">
                <label for="zipcode">éƒµä¾¿ç•ªå· (ãƒã‚¤ãƒ•ãƒ³ãªã— 7æ¡):</label><br>
                <input type="text" id="zipcode" maxlength="7" placeholder="ä¾‹: 1000001">
                
                <button onclick="searchAddress()">æ¤œç´¢</button>
            </div>

            <div class="results">
                <h2>æ¤œç´¢çµæœ</h2>
                <div id="address-result">...ã“ã“ã«ä½æ‰€ãŒè¡¨ç¤ºã•ã‚Œã¾ã™...</div>
                <p id="error-message"></p>
            </div>
        </div>
        
        <div class="sidebar">
            <h3>ä¾¿åˆ©ãªãƒ„ãƒ¼ãƒ«é›†</h3>
            <ul>
                <li><a href="index.html">ğŸ“ æ–‡å­—æ•°ãƒ»è¡Œæ•°ã‚«ã‚¦ãƒ³ãƒˆ</a></li> 
                <li><a href="å’Œæš¦å¤‰æ›ã®ãƒ•ã‚¡ã‚¤ãƒ«å.html">ğŸ—“ï¸ è¥¿æš¦ãƒ»å’Œæš¦ ç›¸äº’å¤‰æ›</a></li>
                <li><a href="#">ğŸ§® å‰²ã‚Šå‹˜è¨ˆç®—ãƒ„ãƒ¼ãƒ«</a></li>
                <li><a href="#">â±ï¸ ã‚·ãƒ³ãƒ—ãƒ«ã‚¿ã‚¤ãƒãƒ¼</a></li>
            </ul>

            <h3 style="margin-top: 30px;">ãƒ‡ãƒ¼ã‚¿ã®æƒ…å ±</h3>
            <p style="font-size: 0.9em; color: #555;">
                æœ¬ãƒ„ãƒ¼ãƒ«ã¯ã€<a href="https://zipcloud.net/" target="_blank">ZipCloud API</a>ã‚’åˆ©ç”¨ã—ã¦ä½æ‰€æƒ…å ±ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚
            </p>
        </div>
        
    </div>

    <script>
        async function searchAddress() {
            // 1. å…¥åŠ›ã•ã‚ŒãŸéƒµä¾¿ç•ªå·ã‚’å–å¾—
            const zipcode = document.getElementById('zipcode').value;
            const resultElement = document.getElementById('address-result');
            const errorElement = document.getElementById('error-message');

            // è¡¨ç¤ºã‚’ãƒªã‚»ãƒƒãƒˆ
            resultElement.textContent = 'æ¤œç´¢ä¸­...';
            errorElement.textContent = '';
            resultElement.style.color = '#007bff'; // æ¤œç´¢ä¸­ã¯é’è‰²

            // 2. éƒµä¾¿ç•ªå·ã®å½¢å¼ãƒã‚§ãƒƒã‚¯ï¼ˆ7æ¡ã®æ•°å­—ã‹ï¼‰
            if (!/^\d{7}$/.test(zipcode)) {
                errorElement.textContent = 'éƒµä¾¿ç•ªå·ã¯ãƒã‚¤ãƒ•ãƒ³ãªã—ã®7æ¡ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
                resultElement.textContent = 'æ¤œç´¢ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚';
                resultElement.style.color = '#d9534f'; // ã‚¨ãƒ©ãƒ¼æ™‚ã¯èµ¤è‰²
                return;
            }

            // 3. ZipCloud APIã®URLã‚’æ§‹ç¯‰ (APIã‚­ãƒ¼ä¸è¦)
            const API_URL = `https://zipcloud.net/api/search?zipcode=${zipcode}`;

            try {
                // 4. APIã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡
                const response = await fetch(API_URL);
                const data = await response.json();

                // 5. ãƒ‡ãƒ¼ã‚¿ã®ãƒã‚§ãƒƒã‚¯ã¨çµæœã®è¡¨ç¤º
                if (data.status === 200) {
                    if (data.results) {
                        // æˆåŠŸ
                        const address = data.results[0];
                        const fullAddress = `${address.pref}${address.address1}${address.address2}`;
                        
                        resultElement.textContent = fullAddress;
                        resultElement.style.color = '#333'; // æˆåŠŸæ™‚ã¯é»’è‰²
                    } else {
                        // éƒµä¾¿ç•ªå·ãŒè¦‹ã¤ã‹ã‚‰ãªã‹ã£ãŸå ´åˆ
                        errorElement.textContent = `éƒµä¾¿ç•ªå·ã€Œ${zipcode}ã€ã«å¯¾å¿œã™ã‚‹ä½æ‰€ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚`;
                        resultElement.textContent = 'è©²å½“ã™ã‚‹ä½æ‰€ãŒã‚ã‚Šã¾ã›ã‚“ã€‚';
                        resultElement.style.color = '#d9534f';
                    }
                } else {
                    // APIå´ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸå ´åˆ
                    errorElement.textContent = `APIã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚`;
                    resultElement.textContent = 'æ¤œç´¢ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚';
                    resultElement.style.color = '#d9534f';
                }

            } catch (e) {
                // ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãªã©äºˆæœŸã›ã¬ã‚¨ãƒ©ãƒ¼
                errorElement.textContent = 'ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ã€ã¾ãŸã¯APIã¨ã®é€šä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚';
                resultElement.textContent = 'æ¤œç´¢ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸã€‚';
                resultElement.style.color = '#d9534f';
                console.error(e);
            }
        }

        // åˆæœŸè¡¨ç¤ºã®è¨­å®š
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('address-result').textContent = 'éƒµä¾¿ç•ªå·ã‚’å…¥åŠ›ã—ã¦ã€Œæ¤œç´¢ã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¦ãã ã•ã„ã€‚';
            document.getElementById('address-result').style.color = '#333';
        });
    </script>
</body>
</html>
